<div class="row">
    <div class="col-lg-12">
        <div class="card">
            <div class="card-header">
                <i class="fa fa-align-justify"></i> Listado de Ventas
            </div>

            <div class="card-body">
                <form [formGroup]="ventasForm">
                    <button type="button" [routerLink]="['/venta']" routerLinkActive="router-link-active" class="btn btn-primary">
                        Nueva Venta
                    </button>

                    <p-table [value]="ventasFiltradas" [paginator]="true" [rows]="10" class="table-filter">
                        <ng-template pTemplate="header">
                            <tr>
                                <th pSortableColumn="id">ID Venta <p-sortIcon field="id"></p-sortIcon></th>
                                <th pSortableColumn="cliente">Cliente <p-sortIcon field="cliente"></p-sortIcon></th>
                                <th pSortableColumn="fecha">Fecha <p-sortIcon field="fecha"></p-sortIcon></th>
                                <th pSortableColumn="total">Monto Total <p-sortIcon field="total"></p-sortIcon></th>
                                <th pSortableColumn="estado">Estado <p-sortIcon field="estado"></p-sortIcon></th>
                                <th>Acciones</th>
                            </tr>
                            <tr>
                                <th><input pInputText type="text" formControlName="id" placeholder="Buscar por ID"></th>
                                <th><input pInputText type="text" formControlName="cliente" placeholder="Buscar por Cliente"></th>
                                <th><input type="date" formControlName="fechaEmision"></th>
                                <th><input pInputText type="text" formControlName="total" placeholder="Buscar por Monto"></th>
                                <th>
                                    <p-dropdown [options]="estados" formControlName="estado" placeholder="Seleccionar Estado"></p-dropdown>
                                </th>
                                <th>
                                    <button pButton type="button" label="Limpiar" (click)="aplicarFiltros(true)"></button>
                                </th>
                            </tr>
                        </ng-template>

                        <ng-template pTemplate="body" let-venta>
                            <tr>
                                <td>{{ venta.id }}</td>
                                <td>{{ venta.cliente.persona.nombre }}</td>
                                <td>{{ venta.fechaEmision | date: 'dd/MM/yyyy' }}</td>
                                <td>{{ venta.total | currency: '$' }}</td>
                                <td>{{ venta.estado }}</td>
                                <td>
                                    <button pButton type="button" label="Ver Detalles" class="p-button-info" (click)="verDetalles(venta)"></button>
                                    <a   routerLink ="/venta/{{venta.id}}" ><button class="btn btn-success pull-right" >Modificar</button></a>
                                 
                                    <button pButton type="button" [disabled]="venta.estado === 'Cancelada'" label="Cancelar" class="p-button-danger" (click)="cancelar(venta)"></button>
                                </td>
                            </tr>
                        </ng-template>
                    </p-table>
                </form>
            </div>
        </div>
    </div>
</div>



<p-confirmDialog header="ConfirmaciÃ³n" appendTo="body" icon="pi pi-exclamation-triangle"></p-confirmDialog>
